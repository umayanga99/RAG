<!DOCTYPE html>
<html lang="en">
    <head>
        <!-- OneTrust Cookies Consent Notice start for broadcom.com -->
        <!-- <script src="https://cdn.cookielaw.org/scripttemplates/otSDKStub.js"  type="text/javascript" charset="UTF-8" data-domain-script="6a5fee8c-80be-4b9a-ab7e-b607e3f8ad3e-test" ></script> -->
        <script id="cookieScript" src="https://cdn.cookielaw.org/scripttemplates/otSDKStub.js"  type="text/javascript" charset="UTF-8" data-domain-script="6a5fee8c-80be-4b9a-ab7e-b607e3f8ad3e" ></script>
        <script type="text/javascript">
        function OptanonWrapper() { }
        </script>
        <!-- OneTrust Cookies Consent Notice end for broadcom.com -->

        <!-- OneTrust Cookies Settings button start -->
        <button id="ot-sdk-btn" class="ot-sdk-show-settings">Cookie Settings</button>
        <!-- OneTrust Cookies Settings button end -->     
        
        <!-- Google Tag Manager -->
        <script>
            (function (w, d, s, l, i) {
                  w[l] = w[l] || [];
                  w[l].push({
                    'gtm.start': new Date().getTime(),
                    event: 'gtm.js'
                  });
                  var f = d.getElementsByTagName(s)[0],
                    j = d.createElement(s),
                    dl = l != 'dataLayer' ? '&l=' + l : '';
                  j.async = true;
                  j.src =
                    'https://www.googletagmanager.com/gtm.js?id=' + i + dl;
                  f.parentNode.insertBefore(j, f);
            })(window, document, 'script', 'dataLayer', 'GTM-KF7XWD');

        </script>
        <!-- End Google Tag Manager -->
        <title>VMware response to ‘L1 Terminal Fault - VMM’ (L1TF - VMM) Speculative-Execution vulnerability in Intel processors for vSphere: CVE-2018-3646</title>
        <link rel="icon" type="image/x-icon" href="https://knowledge.broadcom.com/broadcom-log.png">
        <meta name="description" content=" Symptoms: This article documents the Hypervisor-Specific Mitigations required to address CVE-2018-3646 (L1 Terminal Fault - VMM) in vSphere. Introduction to CVE ">
        <script type="application/ld+json">{"@context":"http://schema.org","@type":"Article","name":"VMware vCenter Server","alternateName":"VMware vCenter Server","datePublished":"08-21-2024 11:54","dateModified":"08-21-2024 11:54","mainEntityOfPage":{"@type":"Webpage","URL":"https://knowledge.broadcom.com/external/article/317621"},"keywords":"N/A","url":"https://knowledge.broadcom.com/external/article/317621"},"author":"Broadcom Inc","headline":"VMware response to ‘L1 Terminal Fault - VMM’ (L1TF - VMM) Speculative-Execution vulnerability in Intel processors for vSphere: CVE-2018-3646","publisher":{"@type":"Organization","name":"Broadcom Inc","logo":{"@type":"ImageObject","url":""}},"aggregateRating":{"@type":"AggregateRating","ratingValue":"","ratingCount":""}}
        </script>
        <link rel="canonical" href="https://knowledge.broadcom.com/external/article/317621/vmware-response-to-l1-terminal-fault-vm.html">

        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
        <link href="https://fonts.googleapis.com/css?family=Poppins:300,400,500" rel="stylesheet">

        <!--SU Scripts-->
        <script type="text/javascript" src="https://searchunify.broadcom.com/resources/Allow/an.js?uid=1fd47e1f-f7d9-11ea-beba-0242ac12000b" defer=""></script>
        <style>
            body {
                --wolken-primary-color: #CC092F;
                --wolken-primary-color-light: #CC092F0D;
                --wolken-primary-complimentory-color:  #2030CC;
                --wolken-accent-complimentory-color:  #CCBC20;
                background: #FFFFFF;
                height: 100vh;
                padding: 0;
                /* margin: 0; */
                font-size: 16px;
                margin: 12px !important;
            }

            #onetrust-consent-sdk{
             font-family: "Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans",sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";   
             font-family: "Gotham-Book",sans-serif;   
            }

            #ot-sdk-btn.ot-sdk-show-settings{
                display: none;
            }

            * {
                box-sizing: border-box;
            }

            h1,
            h2,
            h3,
            h4, 
            h5,
            h6 {
                margin: 12px 0;
            }

            h1{
                line-height: 28px;
            }

            h2{
                line-height: 24px;
            }
            /* newly added for INC01200689 */
            img {
                         height: auto !important;
                         max-width: 100% !important;
            }
            .wolken-h3 {
                font: 500 19px/32px Poppins;
            }

            .wolken-h4 {
                font: 400 15px/24px Poppins;
            }

            .wolken-h5 {
                font: 400 13px/20px Poppins;
            }

            .flex-column {
                display: flex;
                flex-direction: column;
            }

            .flex-row {
                display: flex;
                flex-direction: row;
            }

            .column-gap-16 > *:not(:last-child) {
                margin-bottom: 16px;
            }

            .row-gap-16 > *:not(:last-child) {
                margin-right: 16px;
            }

            .row-gap-8 > *:not(:last-child) {
                margin-right: 8px;
            }

            .row-gap{
                margin: 10px 15px;
            }

            .row-align-space-between-center {
                place-content: center space-between;
                align-items: center;
            }

            .row-align-center-center {
                place-content: center;
                align-items: center;
            }

            .custom-header, .custom-footer {
                max-height: 100%;
                width: 100%;
                display: block;
                border: 0;
            }

            .search-bar{
                border: 1px solid #cacaca;
                width: calc(100%);
                outline: none;
                padding: 12px 0;
                padding-left: 15px !important;
                text-indent: 12px;
                font-family: arial,sans-serif;
                font-size: 16px;
                line-height: 24px;
                height: 30px;
                white-space: pre;
                overflow: auto;
                box-sizing: border-box;
                display: block;
                border-radius: 6px;
            }

            .show_more, .show_less{
                    width: auto !important;
            }

            .search-button-container{
                padding: 0 16px;
                display: flex;
                align-items: center;
                /* place-content: end; */
                margin-bottom: 5px !important;
                place-content: center;
                margin-bottom: 5px !important;
                width: 100%;
                background: transparent linear-gradient(90deg, #3D4145 0%, #FAFAFA 100%) 0% 0% no-repeat padding-box !important;
                background-repeat: no-repeat;
            }

            .search-bar-container{
                width: 880px;
                display: flex;
                height: 100px;
                align-items: center;
            }

            .material-icon-search{
                cursor:pointer;
                align-self: center;
                font-size: 20px;
                color: #00000061;
            }

            .article-updated-time {
                flex: 0 0 auto;
                align-items: center;
            }

            .article-updated-date-icon {
                color: var(--wolken-accent-complimentory-color);
            }

            .article-updated-date-icon_cal{
                color: var(--wolken-primary-complimentory-color);
            }


            .article-detail-card {
                box-shadow: 0px 0px 6px #00000066;
                border-top: 4px solid var(--wolken-primary-color);
                border-radius: 10px;
                width: 100%;
            }

            .article-detail-card-header {
                padding: 8px 16px;
                border-bottom: 1px solid #00000066;
            }

            .article-detail-card-content {
                padding: 8px 16px;
                max-width: 100%;
                overflow: auto;
            }

            .like_dislike_btn {
                cursor: pointer;
            }

            .product-container {
                display: flex;
                flex-direction: row;
                flex-wrap: wrap;
                padding: 8px;
            }

            .product-chip {
                padding: 4px 12px;
                margin: 4px;
                background: var(--wolken-primary-color-light);
                border: 1px solid #00000066;
                border-radius: 50px;
                font: 400 12px/25px Poppins;
                color: #000000;
            }

            .attachment-container {
                display: flex;
                flex-direction: row;
                flex-wrap: wrap;
            }

            .attachment-card {
                box-shadow: 0px 0px 2px #00000033;
                border-radius: 4px;
                margin: 8px;
            }

            .attachment-card:hover {
                box-shadow: 0px 0px 4px #00000033;
            }

            .attachment-name {
                padding: 0px 8px;
                font: 400 12px/18px Poppins;
            }

            .attachment-download {
                padding: 8px 12px;
                color: #ffffff;
                background: var(--wolken-primary-color);
                border-radius: 4px;
                height: 100%;
                cursor: pointer;
            }

            .attachment-download-icon {
                font-size: 16px;
                height: 16px;
                width: 16px;
            }

            .text-ellipsis {
                white-space: nowrap;
                overflow: hidden;
                text-overflow: ellipsis;
            }

            .article-page {
                position: relative;
            }

            .loader-container {
                position: absolute;
                top: 0;
                left: 0;
                width: 100%;
                background-color: #ffffff;
                z-index: 1;
            }

            .article-container {
                display: none;
                position: absolute;
                top: 0;
                left: 0;
                z-index: 0;
                width: 100%;
            }

            .wolken-footer {
                width: 100%;
                height: 30px;
                padding: 0 16px;
                background-color: var(--wolken-primary-color-light);
                place-content: center flex-end;
                align-items: center;
            }

            .wolken-footer-content {
                text-decoration: none;
                cursor: pointer;
                font: 400 12px/10px Poppins;
            }

            table {
                table-layout: fixed;
                border: 1px solid;
                border-collapse: collapse;
                white-space: initial;
                word-break: break-word;
            }

            table td, table th {
                border: 1px solid;
                border-collapse: collapse;
                padding: 10px;
            }

            .alert_style{
                         background-color: rgb(209, 119, 119);
                         padding: 5px 5px 5px 5px;
                         border-radius: 5px 5px 5px 5px;
                    }
                    .kb_article_alert {
                         font-weight: bold; font-size: 15px;
                    }

            @media all and (min-width: 1200px) {
              .wolken-content-container {
                max-width: 1170px;
                width: 100%;
                margin: auto;
                padding: 16px 0px;
              }

              .article-header {
                display: flex;
                flex-direction: row;
                place-content: flex-start space-between;
                align-items: flex-start;
                margin-top: 10px !important;
              }

              .article-ruler{
                border: 2px solid var(--wolken-primary-color);
                    width: 10px;
                    width: 100%;
                    position: absolute;
                    top:135px;
                    left:0;
                    right:0;
              }

              .article-header > div:not(:last-child) {
                margin-right: 16px;
              }
              .article-header-info{
               display: flex;
                flex-direction: row;
                place-content: flex-start start;
                align-items: flex-start;
              }
              .article-header-info > div:not(:last-child) {
                margin-right: 16px;
              }
            }

            @media all and (min-width: 1440px) {
              .wolken-content-container {
                max-width: 1400px;
                margin: auto;
              }
            }

            @media all and (min-width: 1199px) {
              .wolken-content-container {
                max-width: 930px;
                margin: auto;
              }
            }

            @media all and (min-width: 992px) {
              .wolken-content-container {
                max-width: 960px;
                margin: auto;
              }
            }

            @media all and (max-width: 1199px){
                .wolken-content-container {
                    width: 100%;
                    padding: 16px;
                }

                .attachment {
                    width: 25%;
                }

                .article-header {
                    display: flex;
                    flex-direction: row;
                    place-content: flex-start space-between;
                    align-items: flex-start;
                  }

                  .article-header > div:not(:last-child) {
                    margin-right: 16px;
                  }
                .article-header-info{
                   display: flex;
                   flex-direction: row;
                   place-content: flex-start start;
                   align-items: flex-start;
                  }
                  .article-header-info > div:not(:last-child) {
                   margin-right: 16px;
                  }
            }

            @media all and (min-width: 768px) and (max-width: 959px) {
                .attachment {
                    width: 33.333333%;
                }

                .article-header {
                    display: flex;
                    flex-direction: column;
                  }

                  .article-header > div:not(:last-child) {
                    margin-bottom: 8px;
                  }
            }

            @media all and (max-width: 767px){
                .attachment {
                    width: 50%;
                }

                .article-header {
                    display: flex;
                    flex-direction: column;
                  }

                  .article-header > div:not(:last-child) {
                    margin-bottom: 8px;
                  }
                 .article-header-info{
                   display: flex;
                   flex-direction: row;
                   place-content: flex-start start;
                   align-items: flex-start;
                  }
                  .article-header-info > div:not(:last-child) {
                   margin-right: 16px;
                  }
            }

            .ghost-loader {
                border-radius: 5px;
                animation: shine-lines 1.5s infinite linear;
                background-image: linear-gradient(to right, rgba(211, 211, 211, 0.2) 0%, rgba(211, 211, 211, 0.7) 20%,
                    rgba(211, 211, 211, 0.9) 40%, rgba(211, 211, 211, 0.2) 100%) ;
            }

            @keyframes shine-lines {
                0% {
                    background-position: -100px;
                }

                40%, 100% {
                    background-position: 140px;
                }
            }

            .ghost-custom-header {
                width: 100%;
                height: 90px;
            }

            .ghost-article-title {
                width: 200px;
                height: 32px;
            }

            .ghost-article-date {
                width: 200px;
                height: 32px;
            }

            .ghost-article-detail-title {
                width: 150px;
                height: 24px;
            }

            .ghost-product-detail-content>div {
                width: 20%;
                height: 30px;
                padding: 4px 12px;
                margin: 4px;
                border-radius: 50px;
            }

            .ghost-article-detail-content>div:nth-child(1) {
                width: 70%;
                height: 20px
            }

            .ghost-article-detail-content>div:nth-child(2) {
                width: 20%;
                height: 30px
            }

            .ghost-article-detail-content>div:nth-child(3) {
                width: 40%;
                height: 20px
            }

            .ghost-article-detail-content>div:nth-child(4) {
                width: 30%;
                height: 15px
            }

            .ghost-article-detail-content>div:nth-child(5) {
                width: 50%;
                height: 25px
            }

            .ghost-custom-footer {
                width: 100%;
                height: 140px;
            }

            .wolken-primary-button {
                margin-left: 2px;
                /* background-color: var(--wolken-primary-color); */
                background-color: #005C8A;
                border-radius: 4px;
                box-shadow: 0 5px 6px 0rgba(0, 0, 0, 0.1);
                border: none;
                color: white;
                border: 1px solid #7e8c9a;
                border-left: none;
                text-decoration: none;
                text-align: center;
                vertical-align: middle;
                overflow: hidden;
                height: 30px;
                width: 65px;
                min-width: 65px;
                cursor: pointer;
                line-height: 0;
            }

            .wolken-primary-button .material-icons {
                font-size: 20px;
                height: 20px;
                width: 20px;
            }

            #feedback_actionMsg, #feedback_actions {
               margin: 8px 8px 8px 0px;
            }

            .icon-24{
              font-size: 20px;
            }

            span.mat-caption {
            font: 400 12px/14px Poppins;
            letter-spacing: normal;
            }

            @media screen and (-ms-high-contrast: active), (-ms-high-contrast: none) {
              /* IE10+ specific styles go here */
                    .article-updated-date-icon {
                        color: var(--wolken-primary-complimentory-color);
                        color: #ccbc20;
                    }

                    .article-updated-date-icon_cal{
                        color: var(--wolken-primary-complimentory-color);
                        color: #2030cc;
                    }

                    .article-detail-card {

                        box-shadow: 0px 0px 10px 0px rgba(68,68,68,0.6);
                        border-top: 4px solid var(--wolken-primary-color);
                        border-top-style: solid;
                        border-top-width: 4px;
                        border-top-color: rgb(204, 9, 47);
                        border-radius: 10px;
                        width: 100%;
                    }

                    .article-detail-card-header {
                        padding: 8px 16px;
                        border-bottom: 1px solid #00000066;
                        border-bottom-style: solid;
                        border-bottom-width: 1px;
                        border-bottom-color: rgba(0, 0, 0, 0.40);
                    }
                     .product-chip {
                        padding: 4px 12px;
                        margin: 4px;
                        background: var(--wolken-primary-color-light);
                        background: rgba(204, 9, 47, 0.05);
                        border: 1px solid rgba(0, 0, 0, 0.40);
                        border-style: solid;
                        border-width: 1px;
                        border-color: rgba(0, 0, 0, 0.40);
                        border-radius: 50px;
                        font: 400 12px/25px Poppins;
                        color: #000000;
                    }
                    .attachment-card {
                        box-shadow: 0px 0px 2px 0px rgba(68,68,68,0.6);
                        border-radius: 4px;
                        margin: 8px;
                    }

                    .attachment-card:hover {
                        box-shadow: 0px 0px 4px 0px rgba(68,68,68,0.6);

                    }

                    .attachment-name {
                        padding: 0px 8px;
                        font: 400 12px/18px Poppins;
                    }

                    .attachment-download {
                        padding: 8px 12px;
                        color: #ffffff;
                        background: var(--wolken-primary-color);
                        background: rgb(204, 9, 47);
                        border-radius: 4px;
                        height: 100%;
                        cursor: pointer;
                    }
                     .wolken-footer {
                        width: 100%;
                        height: 30px;
                        padding: 0 16px;
                        background-color: var(--wolken-primary-color-light);
                        background: rgba(204, 9, 47, 0.05);
                        place-content: center flex-end;
                        justify-content: flex-end;
                        align-items: center;
                    }
                    .wolken-primary-button {
                        box-shadow: 0px 3px 1px -2px rgba(0, 0, 0, 0.2), 0px 2px 2px 0px rgba(0, 0, 0, 0.14), 0px 1px 5px 0px rgba(0, 0, 0, 0.12);
                        background-color: var(--wolken-primary-color);
                        background-color: rgb(204, 9, 47);
                        color: #ffffff;
                        padding: 4px 12px;
                        font-size: 12px;
                        line-height: 24px;
                        cursor: pointer;
                        outline: 0;
                        border: none;
                        transform: translate3d(0,0,0);
                        transition: background .4s cubic-bezier(.25,.8,.25,1),box-shadow 280ms cubic-bezier(.4,0,.2,1);
                        font-family: Poppins;
                        font-weight: 500;
                        border-radius: 4px;
                    }

                    table {
                        table-layout: fixed;
                        border: 1px solid;
                        border-collapse: collapse;
                        white-space: initial;
                        word-break: break-word;
                    }

                    table td, table th {
                        border: 1px solid;
                        border-collapse: collapse;
                    }



            }

            pre {
            white-space: pre-wrap !important;
            background: #f7f7f7 !important;
            padding: 5px !important;
            }

            hr {
              margin: 20px 0;
            }
            
            hr br[data-mce-bogus] {
              display: none;
            }
        </style>
    </head>
    <body>

        <div class="article-page">
            <div class="article-container flex-column">

                <iframe  id = "global-header" class="custom-header" title="https://cdn.wolkenservicedesk.com/Broadcom_%20Header.html" src="https://cdn.wolkenservicedesk.com/Broadcom_%20Header.html" height="90px" ></iframe>
                <div class="search-button-container">
                    <div class="search-bar-container">
                        <span class="material-icons material-icon-search" style="margin-left: 5px;position: absolute;">search</span>
                        <input type="text" placeholder="Search" name="search" class="search-bar" id="searchBox" onkeypress="redirectOnSearch(event)">
                        <span class="material-icons material-icon-search" style="margin-left: -25px;" onclick="clearSearch()">cancel</span>
                    </div>
                    <button onclick="redirectOnSearch()" class="wolken-primary-button">
                        <!-- <span class="material-icons">search</span> -->
                        Search
                    </button>
                </div>
                <div class="wolken-content-container flex-column column-gap-16">

                    <!-- <hr class="article-ruler"> -->
                    <div class="article-header">
                        <h3 class="wolken-h3">VMware response to ‘L1 Terminal Fault - VMM’ (L1TF - VMM) Speculative-Execution vulnerability in Intel processors for vSphere: CVE-2018-3646</h3>

                    </div>
                    <div class="article-header-info">
                        <div class="flex-row row-gap-8 article-updated-time">
                            <span class="material-icons article-updated-date-icon">book</span>
                            <h4 class="wolken-h4">Article ID: 317621</h4>
                        </div>
                        <div class="flex-row row-gap-8 article-updated-time">
                            <span class="material-icons article-updated-date-icon_cal">calendar_today</span>
                            <h4 class="wolken-h4">Updated On: <span id="date_time"></span></h4>
                        </div>
                    </div>
                    <div class="article-detail-card">
                        <div class="article-detail-card-header">
                            <h4 class="wolken-h4">Products</h4>
                        </div>
                        <div class="product-container wolken-h5">
                            
                                
                                 <span class="product-chip">VMware vCenter Server</span>
                                
                            
                        </div>
                        <button class="show_more flex-row row-align-center-center row-gap wolken-primary-button" onclick="showMoreItems()">Show More</button>
                        <button class="show_less flex-row row-align-center-center row-gap wolken-primary-button" onclick="showLessItems()">Show Less</button>
                    </div>

                    
                        <div class="article-detail-card">
                            <div class="article-detail-card-header">
                                <h4 class="wolken-h4">Issue/Introduction</h4>
                            </div>
                            <div class="article-detail-card-content wolken-h5">
                                <div><div><p>Symptoms:<br>This article documents the <u>Hypervisor-Specific Mitigations</u> required to address <a href="https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2018-3646" target="_blank" rel="noopener">CVE-2018-3646</a> (L1 Terminal Fault - VMM) in vSphere.<br><br><br><br><strong>Introduction to <a href="https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2018-3646" target="_blank" rel="noopener">CVE-2018-3646</a></strong><br><br>Intel has disclosed details on a new class of CPU speculative-execution vulnerabilities known collectively as “L1 Terminal Fault” that can occur on past and current Intel processors (from at least 2009 – 2018) [See Table 1 for supported vSphere processors that are affected].<br><br>Like Meltdown, Rogue System Register Read, and "Lazy FP state restore", the “L1 Terminal Fault” vulnerability can occur when affected Intel microprocessors speculate beyond an unpermitted data access. By continuing the speculation in these cases, the affected Intel microprocessors expose a new side-channel for attack. (Note, however, that architectural correctness is still provided as the speculative operations will be later nullified at instruction retirement.)&nbsp;<br><br><a href="https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2018-3646" target="_blank" rel="noopener">CVE-2018-3646</a>&nbsp;is one of these Intel microprocessor vulnerabilities and impacts hypervisors. It may allow a malicious VM running on a given CPU core to effectively infer contents of the hypervisor's or another VM's privileged information residing at the same time in the same core's L1 Data cache. Because current Intel processors share the physically-addressed L1 Data Cache across both logical processors of a Hyperthreading (HT) enabled core, indiscriminate simultaneous scheduling of software threads on both logical processors creates the potential for further information leakage. <a href="https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2018-3646" target="_blank" rel="noopener">CVE-2018-3646</a> has two currently known attack vectors which will be referred to here as "Sequential-Context" and "Concurrent-Context.” Both attack vectors must be addressed to mitigate <a href="https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2018-3646" target="_blank" rel="noopener">CVE-2018-3646</a>.<br><br><strong>Attack Vector Summary&nbsp;</strong></p>
<ul>
<li><u>Sequential-context attack vector</u>: a malicious VM can potentially infer recently accessed L1 data of a previous context (hypervisor thread or other VM thread) on either logical processor of a processor core.&nbsp;</li>
<li><u>Concurrent-context attack vector</u>: a malicious VM can potentially infer recently accessed L1 data of a concurrently executing context (hypervisor thread or other VM thread) on the other logical processor of the hyperthreading-enabled processor core.&nbsp;</li>
</ul>
<p><strong>Mitigation Summary&nbsp;</strong></p>
<ul>
<li>Mitigation of the Sequential-Context attack vector is achieved by vSphere updates and patches. This mitigation is enabled by default and does not impose a significant performance impact. Please see the resolution section for details.&nbsp;</li>
<li>Mitigation of the Concurrent-context attack vector requires enablement of a new feature known as the <u>ESXi Side-Channel-Aware Scheduler</u>. The initial version of this feature will only schedule the hypervisor and VMs on one logical processor of an Intel Hyperthreading-enabled core. This feature may impose a non-trivial performance impact and is not enabled by default. Please see resolution section for details.&nbsp;</li>
</ul>
<p><strong>Important</strong>: Disabling Intel Hyperthreading in firmware/BIOS (or by using VMkernel.Boot.Hyperthreading) after applying vSphere updates and patches is not recommended and precludes potential vSphere scheduler enhancements and mitigations that will allow the use of both logical processors. Mitigation should be done by enabling the ESXi Side Channel Aware Scheduler (see below).<br><br>Unlike explicit disabling of Intel Hyperthreading in firmware/BIOS (or by using VMKernel.Boot.Hyperthreading), the side channel aware scheduler enablement will be ignored on AMD processors and newer Intel processors that are not vulnerable to L1TF-VMM. [See Table 1 for supported vSphere processors that are affected].<br><br></p></div></div>
                            </div>
                        </div>
                    

                    

                    



                    
                        <div class="article-detail-card">
                            <div class="article-detail-card-header">
                                <h4 class="wolken-h4">Resolution</h4>
                            </div>
                            <div class="article-detail-card-content wolken-h5">
                                <div><div>
<p>The mitigation process for <a href="https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2018-3646" target="_blank" rel="noopener">CVE-2018-3646</a> is divided into three phases:<br><img src="https://api-broadcomcms-software.wolkenservicedesk.com/attachment/get_attachment_content?uniqueFileId=1512276186750"><br>&nbsp;</p>
<ol>
<li><strong>Update Phase: Apply vSphere Updates and Patches</strong></li>
</ol>
<div style="margin-left: 40px;">The <u>Sequential-context attack vector</u> is mitigated by a vSphere update to the product versions listed in VMware Security Advisory <a href="https://www.vmware.com/security/advisories/VMSA-2018-0020.html" target="_blank" rel="noopener">VMSA-2018-0020</a>. This mitigation is dependent on Intel microcode updates (provided in separate ESXi patches for most Intel hardware platforms) which are also documented in <a href="https://www.vmware.com/security/advisories/VMSA-2018-0020.html" target="_blank" rel="noopener">VMSA-2018-0020</a>. This mitigation is enabled by default and does not impose a significant performance impact.<br><br><strong>Note</strong>: As displayed in the workflow above, vCenter Server should be updated prior to applying ESXi patches. Notification messages were added in the aforementioned updates and patches to explain that the <u>ESXi Side-Channel-Aware Scheduler</u> must be enabled to mitigate the Concurrent-context attack vector of <a href="https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2018-3646" target="_blank" rel="noopener">CVE-2018-3646</a>. If ESXi is updated prior to vCenter you may receive cryptic notification messages relating to this. After vCenter has been updated, the notifications will be shown correctly.</div>
<ol start="2">
<li><strong>Planning Phase: Assess Your Environment</strong></li>
</ol>
<div style="margin-left: 40px;">The <u>Concurrent-context attack vector</u> is mitigated through enablement of the <u>ESXi Side-Channel-Aware Scheduler</u> which is included in the updates and patches listed in <a href="https://www.vmware.com/security/advisories/VMSA-2018-0020.html" target="_blank" rel="noopener">VMSA-2018-0020</a>. This scheduler is not enabled by default. Enablement of this scheduler may impose a non-trivial performance impact on applications running in a vSphere environment. The goal of the Planning Phase is to understand if your current environment has sufficient CPU capacity to enable the scheduler without operational impact.</div>
<div style="margin-left: 40px;"><br>The following list summarizes potential problem areas after enabling the <u>ESXi Side-Channel-Aware Scheduler</u>:</div>
<ul style="margin-left: 80px;">
<li>VMs configured with vCPUs greater than the physical cores available on the ESXi host</li>
<li>VMs configured with custom affinity or NUMA settings</li>
<li>VMs with latency-sensitive configuration</li>
<li>ESXi hosts with Average CPU Usage greater than 70%</li>
<li>Hosts with custom CPU resource management options enabled</li>
<li>HA Clusters where a rolling upgrade will increase Average CPU Usage above 100%</li>
</ul>
<div style="margin-left: 40px;"><strong>Important</strong>: The above list is meant to be a brief overview of potential problem areas related to enablement of the <u>ESXi Side-Channel-Aware Scheduler</u>.&nbsp;</div>
<div style="margin-left: 40px;"><br><strong>Note</strong>: It may be necessary to acquire additional hardware, or rebalance existing workloads, before enablement of the <u>ESXi Side-Channel-Aware Scheduler</u>. Organizations can choose not to enable the <u>ESXi Side-Channel-Aware Scheduler</u> after performing a risk assessment and accepting the risk posed by the <u>Concurrent-context attack vector</u>. This is NOT RECOMMENDED and VMware cannot make this decision on behalf of an organization.</div>
<ol start="3">
<li><strong>Scheduler-Enablement Phase: </strong>
<ol style="list-style-type: lower-alpha;" start="1">
<li><strong>Enable the <u>ESXi Side-Channel-Aware Scheduler</u> in ESXi 5.5, 6.0, 6.5, and 6.7 (prior to 6.7u2) and 7.0.</strong></li>
</ol>
</li>
</ol>
<div style="margin-left: 80px;">After addressing the potential problem areas described above during the Planning Phase, the <u>ESXi Side-Channel-Aware Scheduler</u> must be enabled to mitigate the <u>Concurrent-context attack vector</u> of <a href="https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2018-3646" target="_blank" rel="noopener">CVE-2018-3646</a>. The scheduler can be enabled on an individual ESXi host via the advanced configuration option <em>hyperthreadingMitigation</em>.&nbsp;</div>
<div style="margin-left: 40px;">&nbsp;</div>
<div style="margin-left: 80px;"><strong>Notes</strong>:</div>
<ul>
<li style="margin-left: 80px;">Enabling this option will result in the vSphere UI reporting only a single logical processor per physical core; halving the number of logical processors if Hyperthreading was previously enabled. In addition Hyperthreading may be reported as 'Disabled' in various configuration tabs.</li>
<li style="margin-left: 80px;">The current <u>ESXi Side-Channel-Aware scheduler</u> also addresses <a href="https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2018-5407" target="_blank" rel="noopener">CVE-2018-5407</a>.</li>
</ul>
<div style="margin-left: 80px;">Enabling the <u>ESXi Side-Channel-Aware Scheduler</u> using the vSphere Web Client or vSphere&nbsp;Client</div>
<ol style="margin-left: 120px;">
<li>
<div>Connect to the vCenter Server using either the vSphere Web or vSphere&nbsp;Client.</div>
</li>
<li>
<div>Select an ESXi host in the inventory.</div>
</li>
<li>
<div>Click the <strong>Manage</strong> (5.5/6.0) or Configure (6.5/6.7/7.0) tab.</div>
</li>
<li>
<div>Click the <strong>Settings</strong> sub-tab.</div>
</li>
<li>
<div>Under the System heading, click <strong>Advanced System Settings</strong>.</div>
</li>
<li>
<div>Click in the Filter box and search <span style="font-family: courier new,courier,monospace;">VMkernel.Boot.hyperthreadingMitigation</span></div>
</li>
<li>
<div>Select the setting by name and click the <strong>Edit</strong> pencil icon.</div>
</li>
<li>
<div>Change the configuration option to true (default: false).</div>
</li>
<li>
<div>Click <strong>OK</strong>.</div>
</li>
<li>
<div>Reboot the ESXi host for the configuration change to go into effect.</div>
</li>
</ol>
<div style="margin-left: 80px;">Enabling the <u>ESXi Side-Channel-Aware Scheduler</u> using ESXi Embedded Host Client</div>
<ol style="margin-left: 120px;">
<li>
<div>Connect to the ESXi host by opening a web browser to https://<em>HOSTNAME</em>.</div>
</li>
<li>
<div>Click the <strong>Manage</strong> tab.</div>
</li>
<li>
<div>Click the <strong>Advanced settings</strong> sub-tab.</div>
</li>
<li>
<div>Click in the Filter box and search <span style="font-family: courier new,courier,monospace;">VMkernel.Boot.hyperthreadingMitigation</span></div>
</li>
<li>
<div>Select the setting by name and click the <strong>Edit</strong> pencil icon.</div>
</li>
<li>
<div>Change the configuration option to true (default: false).</div>
</li>
<li>
<div>Click <strong>Save</strong>.</div>
</li>
<li>
<div>Reboot the ESXi host for the configuration change to go into effect.</div>
</li>
</ol>
<div style="margin-left: 40px;">
<div style="margin-left: 40px;">Enable <u>ESXi Side-Channel-Aware Scheduler</u> setting using ESXCLI</div>
<ol style="margin-left: 80px;">
<li>
<div>SSH to an ESXi host or open a console where the remote ESXCLI is installed. For more information, see the <a href="https://developer.broadcom.com/tools/esxcli/latest" target="_blank" rel="noopener">ESXCLI Developer Portal</a>.</div>
</li>
<li>
<div>Check the current runtime value of the HTAware Mitigation Setting by running&nbsp;<span style="font-family: courier new,courier,monospace;">esxcli system settings kernel list -o hyperthreadingMitigation</span></div>
</li>
<li>
<div>To enable HT Aware Mitigation, run this command:</div>
</li>
</ol>
<div style="margin-left: 80px;"><span style="font-family: courier new,courier,monospace;">esxcli system settings kernel set -s hyperthreadingMitigation -v TRUE</span></div>
<ol style="margin-left: 80px;" start="4">
<li>Reboot the ESXi host for the configuration change to go into effect.</li>
</ol>
</div>
<ol style="margin-left: 80px; list-style-type: lower-alpha;" start="2">
<li><strong><span style="font-family: metropolisregular,serif;"><span style="font-size: 10.5pt;">Enable the&nbsp;<u>ESXi Side-Channel-Aware Scheduler</u> (SCAv1) or the <u>ESXi Side-Channel-Aware Scheduler v2 </u>(SCAv2) in ESXi 6.7u2 (13006603)&nbsp;or later </span></span></strong></li>
</ol>
<div style="margin-left: 80px;"><span style="font-family: metropolisregular,serif;"><span style="font-size: 10.5pt;"><strong>Note</strong></span></span><strong><span style="font-family: metropolisregular,serif;"><span style="font-size: 10.5pt;">:&nbsp;</span></span></strong><span style="color: black;"><span style="font-family: metropolisregular,serif;"><span style="font-size: 10.5pt;">ESXi 6.7u2 (13006603)&nbsp;and future release lines of ESXi include the<u> ESXi Side-Channel-Aware Scheduler v2</u>. Prior release lines such as 6.5, 6.0, and 5.5 cannot accommodate this new scheduler.</span></span></span></div>
<div style="margin-left: 40px;">&nbsp;</div>
<div style="margin-left: 80px;"><img src="https://api-broadcomcms-software.wolkenservicedesk.com/attachment/get_attachment_content?uniqueFileId=1512272017699"><br>&nbsp;</div>
<p>&nbsp;</p>
<div style="margin-left: 80px;"><span style="color: black;"><span style="font-family: metropolisregular,serif;"><span style="font-size: 10.5pt;">VMware has published a white paper entitled <a href="https://www.vmware.com/techpapers/2018/scheduler-options-vsphere67u2-perf.html" target="_blank" rel="noopener">Performance of vSphere 6.7 Scheduling Options</a>&nbsp;which provides a more detailed look into the performance differences between SCAv1 and SCAv2. Please review this document before continuing.</span></span></span></div>
<p>&nbsp;</p>
<div style="margin-left: 80px;"><span style="color: black;"><span style="font-family: metropolisregular,serif;"><span style="font-size: 10.5pt;">Enabling the&nbsp;<u>ESXi Side-Channel-Aware Scheduler</u> <u>(SCAv1)</u>&nbsp;using the vSphere Web Client or vSphere&nbsp;Client</span></span></span></div>
<ol style="margin-left: 120px;">
<li><span style="color: black;"><span style="font-family: metropolisregular,serif;"><span style="font-size: 10.5pt;">Connect to the vCenter Server using either the vSphere Web or vSphere&nbsp;Client.</span></span></span></li>
<li><span style="color: black;"><span style="font-family: metropolisregular,serif;"><span style="font-size: 10.5pt;">Select an ESXi host in the inventory.</span></span></span></li>
<li><span style="color: black;"><span style="font-family: metropolisregular,serif;"><span style="font-size: 10.5pt;">Click the&nbsp;Configure tab.</span></span></span></li>
<li><span style="color: black;"><span style="font-family: metropolisregular,serif;"><span style="font-size: 10.5pt;">Under the System heading, click&nbsp;<strong>Advanced System Settings</strong>.</span></span></span></li>
<li><span style="color: black;"><span style="font-family: metropolisregular,serif;"><span style="font-size: 10.5pt;">Click <strong>Edit</strong>.</span></span></span></li>
<li><span style="color: black;"><span style="font-family: metropolisregular,serif;"><span style="font-size: 10.5pt;">Click in the Filter box and search&nbsp;</span></span></span><span style="color: black;"><span style="font-family: courier new;"><span style="font-size: 10.5pt;">VMkernel.Boot.hyperthreadingMitigation.</span></span></span></li>
<li><span style="color: black;"><span style="font-family: metropolisregular,serif;"><span style="font-size: 10.5pt;">Select the setting by name.</span></span></span></li>
<li><span style="color: black;"><span style="font-family: metropolisregular,serif;"><span style="font-size: 10.5pt;">Change the configuration option to true (default: false).</span></span></span></li>
<li><span style="color: black;"><span style="font-family: metropolisregular,serif;"><span style="font-size: 10.5pt;">Click in the Filter box and search <span style="font-family: courier new,courier,monospace;">VMkernel.Boot.hyperthreadingMitigationIntraVM.</span></span></span></span></li>
<li><span style="color: black;"><span style="font-family: metropolisregular,serif;"><span style="font-size: 10.5pt;">Change the configuration option to true (default: true).</span></span></span></li>
<li><span style="color: black;"><span style="font-family: metropolisregular,serif;"><span style="font-size: 10.5pt;">Click&nbsp;<strong>OK</strong>.</span></span></span></li>
<li><span style="color: black;"><span style="font-family: metropolisregular,serif;"><span style="font-size: 10.5pt;">Reboot the ESXi host for the configuration change to go into effect.</span></span></span></li>
</ol>
<div style="margin-left: 80px;"><span style="color: black;"><span style="font-family: metropolisregular,serif;"><span style="font-size: 10.5pt;">Enabling the&nbsp;<u>ESXi Side-Channel-Aware Scheduler</u>&nbsp;(SCAv1) using ESXi Embedded Host Client</span></span></span></div>
<ol style="margin-left: 120px;">
<li><span style="color: black;"><span style="font-family: metropolisregular,serif;"><span style="font-size: 10.5pt;">Connect to the ESXi host by opening a web browser to https://<em>HOSTNAME</em>.</span></span></span></li>
<li><span style="color: black;"><span style="font-family: metropolisregular,serif;"><span style="font-size: 10.5pt;">Click <strong>Manage</strong>&nbsp;under host navigator.</span></span></span></li>
<li><span style="color: black;"><span style="font-family: metropolisregular,serif;"><span style="font-size: 10.5pt;">Click the&nbsp;<strong>Advanced settings</strong> Tab.</span></span></span></li>
<li><span style="color: black;"><span style="font-family: metropolisregular,serif;"><span style="font-size: 10.5pt;">Use the search box to find&nbsp;</span></span></span><span style="color: black;"><span style="font-family: courier new;"><span style="font-size: 10.5pt;">VMkernel.Boot.hyperthreadingMitigation</span></span></span></li>
<li><span style="color: black;"><span style="font-family: metropolisregular,serif;"><span style="font-size: 10.5pt;">Select the </span></span></span><span style="color: black;"><span style="font-family: courier new;"><span style="font-size: 10.5pt;">VMkernel.Boot.hyperthreadingMitigation</span></span></span><span style="color: black;"><span style="font-family: metropolisregular,serif;"><span style="font-size: 10.5pt;"> setting and click the&nbsp;<strong>Edit</strong>&nbsp;Option.</span></span></span></li>
<li><span style="color: black;"><span style="font-family: metropolisregular,serif;"><span style="font-size: 10.5pt;">Change the configuration option to true (default: false).</span></span></span></li>
<li><span style="color: black;"><span style="font-family: metropolisregular,serif;"><span style="font-size: 10.5pt;">Click <strong>Save.</strong></span></span></span></li>
<li><span style="color: black;"><span style="font-family: metropolisregular,serif;"><span style="font-size: 10.5pt;">Use the search box to find&nbsp;</span></span></span><span style="color: black;"><span style="font-family: courier new;"><span style="font-size: 10.5pt;">VMkernel.Boot.hyperthreadingMitigationIntraVM.</span></span></span></li>
<li><span style="color: black;"><span style="font-family: metropolisregular,serif;"><span style="font-size: 10.5pt;">Select the </span></span></span><span style="color: black;"><span style="font-family: courier new;"><span style="font-size: 10.5pt;">VMkernel.Boot.hyperthreadingMitigationIntraVM</span></span></span><span style="color: black;"><span style="font-family: metropolisregular,serif;"><span style="font-size: 10.5pt;"> setting and click the&nbsp;<strong>Edit</strong>&nbsp;Option.</span></span></span></li>
<li><span style="color: black;"><span style="font-family: metropolisregular,serif;"><span style="font-size: 10.5pt;">Change the configuration option to true (default: true).</span></span></span></li>
<li><span style="color: black;"><span style="font-family: metropolisregular,serif;"><span style="font-size: 10.5pt;">Click&nbsp;<strong>Save</strong>.</span></span></span></li>
<li><span style="color: black;"><span style="font-family: metropolisregular,serif;"><span style="font-size: 10.5pt;">Reboot the ESXi host for the configuration change to go into effect.</span></span></span></li>
</ol>
<div style="margin-left: 80px;"><span style="color: black;"><span style="font-family: metropolisregular,serif;"><span style="font-size: 10.5pt;">Enable&nbsp;<u>ESXi Side-Channel-Aware Scheduler</u>&nbsp;(SCAv1) using ESXCLI</span></span></span></div>
<ol style="margin-left: 120px;">
<li><span style="color: black;"><span style="font-family: metropolisregular,serif;"><span style="font-size: 10.5pt;">SSH to an ESXi host or open a console where the remote ESXCLI is installed. For more information, see the <a href="https://developer.broadcom.com/tools/esxcli/latest">ESXCLI Developer Portal</a>.</span></span></span><span style="color: black;"><span style="font-family: metropolisregular,serif;"><span style="font-size: 10.5pt;">.</span></span></span></li>
<li><span style="color: black;"><span style="font-family: metropolisregular,serif;"><span style="font-size: 10.5pt;">Check the current runtime values by running&nbsp;</span></span></span><span style="color: black;"><span style="font-family: courier new;"><span style="font-size: 10.5pt;">esxcli system settings kernel list -o hyperthreadingMitigation </span></span></span><span style="color: black;"><span style="font-family: metropolisregular,serif;"><span style="font-size: 10.5pt;">and</span></span></span><span style="color: black;"><span style="font-family: courier new;"><span style="font-size: 10.5pt;"> esxcli system settings kernel list -o hyperthreadingMitigationIntraVM.</span></span></span></li>
<li><span style="color: black;"><span style="font-family: metropolisregular,serif;"><span style="font-size: 10.5pt;">To enable the <u>ESXi Side-Channel-Aware Scheduler</u> Version 1 run these commands:</span></span></span></li>
<li><span style="color: black;"><span style="font-family: courier new;"><span style="font-size: 10.5pt;">esxcli system settings kernel set -s hyperthreadingMitigation -v TRUE</span></span></span></li>
<li><span style="color: black;"><span style="font-family: courier new;"><span style="font-size: 10.5pt;">esxcli system settings kernel set -s hyperthreadingMitigationIntraVM -v TRUE</span></span></span></li>
<li><span style="color: black;"><span style="font-family: metropolisregular,serif;"><span style="font-size: 10.5pt;">Reboot the ESXi host for the configuration change to go into effect.</span></span></span></li>
</ol>
<div style="margin-left: 80px;"><span style="color: black;"><span style="font-family: metropolisregular,serif;"><span style="font-size: 10.5pt;">Enabling the&nbsp;<u>ESXi Side-Channel-Aware Scheduler</u> Version 2 (SCAv2)&nbsp;using the vSphere Web Client or vSphere&nbsp;Client</span></span></span></div>
<ol style="margin-left: 120px;">
<li><span style="color: black;"><span style="font-family: metropolisregular,serif;"><span style="font-size: 10.5pt;">Connect to the vCenter Server using either the vSphere Web or vSphere&nbsp;Client.</span></span></span></li>
<li><span style="color: black;"><span style="font-family: metropolisregular,serif;"><span style="font-size: 10.5pt;">Select an ESXi host in the inventory.</span></span></span></li>
<li><span style="color: black;"><span style="font-family: metropolisregular,serif;"><span style="font-size: 10.5pt;">Click the&nbsp;Configure tab.</span></span></span></li>
<li><span style="color: black;"><span style="font-family: metropolisregular,serif;"><span style="font-size: 10.5pt;">Under the System heading, click&nbsp;<strong>Advanced System Settings</strong>.</span></span></span></li>
<li><span style="color: black;"><span style="font-family: metropolisregular,serif;"><span style="font-size: 10.5pt;">Click <strong>Edit.</strong></span></span></span></li>
<li><span style="color: black;"><span style="font-family: metropolisregular,serif;"><span style="font-size: 10.5pt;">Click in the Filter box and search&nbsp;</span></span></span><span style="color: black;"><span style="font-family: courier new;"><span style="font-size: 10.5pt;">VMkernel.Boot.hyperthreadingMitigation.</span></span></span></li>
<li><span style="color: black;"><span style="font-family: metropolisregular,serif;"><span style="font-size: 10.5pt;">Select the setting by name.</span></span></span></li>
<li><span style="color: black;"><span style="font-family: metropolisregular,serif;"><span style="font-size: 10.5pt;">Change the configuration option to true (default: false).</span></span></span></li>
<li><span style="color: black;"><span style="font-family: metropolisregular,serif;"><span style="font-size: 10.5pt;">Click in the Filter box and search VMkernel.Boot.hyperthreadingMitigationIntraVM.</span></span></span></li>
<li><span style="color: black;"><span style="font-family: metropolisregular,serif;"><span style="font-size: 10.5pt;">Change the configuration option to false (default: true).</span></span></span></li>
<li><span style="color: black;"><span style="font-family: metropolisregular,serif;"><span style="font-size: 10.5pt;">Click&nbsp;<strong>OK</strong>.</span></span></span></li>
<li><span style="color: black;"><span style="font-family: metropolisregular,serif;"><span style="font-size: 10.5pt;">Reboot the ESXi host for the configuration change to go into effect.</span></span></span></li>
</ol>
<div style="margin-left: 80px;"><span style="color: black;"><span style="font-family: metropolisregular,serif;"><span style="font-size: 10.5pt;">Enabling the&nbsp;<u>ESXi Side-Channel-Aware Scheduler</u>&nbsp;Version 2 (SCAv2) using ESXi Embedded Host Client</span></span></span></div>
<ol style="margin-left: 120px;">
<li><span style="color: black;"><span style="font-family: metropolisregular,serif;"><span style="font-size: 10.5pt;">Connect to the ESXi host by opening a web browser to https://<em>HOSTNAME</em>.</span></span></span></li>
<li><span style="color: black;"><span style="font-family: metropolisregular,serif;"><span style="font-size: 10.5pt;">Click <strong>Manage</strong>&nbsp;under host navigator.</span></span></span></li>
<li><span style="color: black;"><span style="font-family: metropolisregular,serif;"><span style="font-size: 10.5pt;">Click the&nbsp;<strong>Advanced settings</strong> Tab.</span></span></span></li>
<li><span style="color: black;"><span style="font-family: metropolisregular,serif;"><span style="font-size: 10.5pt;">Use the search box to find&nbsp;</span></span></span><span style="color: black;"><span style="font-family: courier new;"><span style="font-size: 10.5pt;">VMkernel.Boot.hyperthreadingMitigation.</span></span></span></li>
<li><span style="color: black;"><span style="font-family: metropolisregular,serif;"><span style="font-size: 10.5pt;">Select the </span></span></span><span style="color: black;"><span style="font-family: courier new;"><span style="font-size: 10.5pt;">VMkernel.Boot.hyperthreadingMitigation</span></span></span><span style="color: black;"><span style="font-family: metropolisregular,serif;"><span style="font-size: 10.5pt;"> setting and click the&nbsp;<strong>Edit</strong>&nbsp;Option.</span></span></span></li>
<li><span style="color: black;"><span style="font-family: metropolisregular,serif;"><span style="font-size: 10.5pt;">Change the configuration option to true (default: false).</span></span></span></li>
<li><span style="color: black;"><span style="font-family: metropolisregular,serif;"><span style="font-size: 10.5pt;">Click <strong>Save.</strong></span></span></span></li>
<li><span style="color: black;"><span style="font-family: metropolisregular,serif;"><span style="font-size: 10.5pt;">Use the search box to find&nbsp;</span></span></span><span style="color: black;"><span style="font-family: courier new;"><span style="font-size: 10.5pt;">VMkernel.Boot.hyperthreadingMitigationIntraVM.</span></span></span></li>
<li><span style="color: black;"><span style="font-family: metropolisregular,serif;"><span style="font-size: 10.5pt;">Select the </span></span></span><span style="color: black;"><span style="font-family: courier new;"><span style="font-size: 10.5pt;">VMkernel.Boot.hyperthreadingMitigationIntraVM</span></span></span><span style="color: black;"><span style="font-family: metropolisregular,serif;"><span style="font-size: 10.5pt;"> setting and click the&nbsp;<strong>Edit</strong>&nbsp;Option.</span></span></span></li>
<li><span style="color: black;"><span style="font-family: metropolisregular,serif;"><span style="font-size: 10.5pt;">Change the configuration option to false (default: true).</span></span></span></li>
<li><span style="color: black;"><span style="font-family: metropolisregular,serif;"><span style="font-size: 10.5pt;">Click&nbsp;<strong>Save</strong>.</span></span></span></li>
<li><span style="color: black;"><span style="font-family: metropolisregular,serif;"><span style="font-size: 10.5pt;">Reboot the ESXi host for the configuration change to go into effect.</span></span></span></li>
</ol>
<div style="margin-left: 80px;"><span style="color: black;"><span style="font-family: metropolisregular,serif;"><span style="font-size: 10.5pt;">Enable&nbsp;<u>ESXi Side-Channel-Aware Scheduler</u>&nbsp;Version 2 (SCAv2) using ESXCLI</span></span></span></div>
<ol style="margin-left: 120px;">
<li><span style="color: black;"><span style="font-family: metropolisregular,serif;"><span style="font-size: 10.5pt;">SSH to an ESXi host or open a console where the remote ESXCLI is installed. For more information, see the <a href="https://developer.broadcom.com/tools/esxcli/latest" target="blank" rel="noopener">ESXCLI Developer Portal</a>.</span></span></span><span style="color: black;"><span style="font-family: metropolisregular,serif;"><span style="font-size: 10.5pt;">.</span></span></span></li>
<li><span style="color: black;"><span style="font-family: metropolisregular,serif;"><span style="font-size: 10.5pt;">Check the current runtime values by running&nbsp;</span></span></span><span style="color: black;"><span style="font-family: courier new;"><span style="font-size: 10.5pt;">esxcli system settings kernel list -o hyperthreadingMitigation </span></span></span><span style="color: black;"><span style="font-family: metropolisregular,serif;"><span style="font-size: 10.5pt;">and</span></span></span><span style="color: black;"><span style="font-family: courier new;"><span style="font-size: 10.5pt;"> esxcli system settings kernel list -o hyperthreadingMitigationIntraVM</span></span></span></li>
<li><span style="color: black;"><span style="font-family: metropolisregular,serif;"><span style="font-size: 10.5pt;">To enable the <u>ESXi Side-Channel-Aware Scheduler</u> Version 1 run these commands:</span></span></span></li>
<li><span style="color: black;"><span style="font-family: courier new;"><span style="font-size: 10.5pt;">esxcli system settings kernel set -s hyperthreadingMitigation -v TRUE</span></span></span></li>
<li><span style="color: black;"><span style="font-family: courier new;"><span style="font-size: 10.5pt;">esxcli system settings kernel set -s hyperthreadingMitigationIntraVM -v FALSE</span></span></span></li>
<li><span style="color: black;"><span style="font-family: metropolisregular,serif;"><span style="font-size: 10.5pt;">Reboot the ESXi host for the configuration change to go into effect.</span></span></span></li>
</ol>
<div style="margin-left: 80px;"><strong><span style="color: black;"><span style="font-family: metropolisregular,serif;"><span style="font-size: 10.5pt;">ESXi 6.7u2 (and later) Scheduler Configuration Summary</span></span></span></strong></div>
<div style="margin-left: 80px;">
<table style="width: 500px;" border="1">
<tbody>
<tr>
<td style="text-align: center;" colspan="1" rowspan="1">hyperthreadingMitigation</td>
<td style="text-align: center;" colspan="1" rowspan="1">hyperthreadingMitigationIntraVM</td>
<td style="text-align: center;" colspan="1" rowspan="1">Scheduler Enabled</td>
</tr>
<tr>
<td style="text-align: center;" colspan="1" rowspan="1">FALSE</td>
<td style="text-align: center;" colspan="1" rowspan="1">TRUE or FALSE</td>
<td colspan="1" rowspan="1">Default scheduler (unmitigated)</td>
</tr>
<tr>
<td style="text-align: center;" colspan="1" rowspan="1">TRUE</td>
<td style="text-align: center;" colspan="1" rowspan="1">TRUE</td>
<td colspan="1" rowspan="1">SCAv1</td>
</tr>
<tr>
<td style="text-align: center;" colspan="1" rowspan="1">TRUE</td>
<td style="text-align: center;" colspan="1" rowspan="1">FALSE</td>
<td colspan="1" rowspan="1">SCAv2</td>
</tr>
</tbody>
</table>
</div>
<p><br><u><strong>HTAware Mitigation Tool</strong></u><br><br>VMware has provided a tool to assist in performing both the <strong>Planning Phase</strong> and the <strong>Scheduler-Enablement Phase</strong> at scale. This tool has been updated to include SCAv2 support and can be found in <a href="https://knowledge.broadcom.com/external/article?legacyId=56931" target="_blank" rel="noopener">HTAware Mitigation Tool Overview and Usage (328935)</a> along with detailed instructions on its usage, capabilities, and limitations.<br><br><strong>Table 1</strong>: Affected Intel Processors Supported by ESXi</p>
<table style="width: 546px;" border="1" width="546" cellspacing="0" cellpadding="0">
<tbody>
<tr>
<td style="width: 126px;" colspan="1" rowspan="1"><strong><span style="color: black;"><span style="font-family: calibri,sans-serif;"><span style="font-size: 10.0pt;">Intel Code Name</span></span></span></strong></td>
<td style="width: 68px;" colspan="1" rowspan="1"><strong><span style="color: black;"><span style="font-family: calibri,sans-serif;"><span style="font-size: 10.0pt;">FMS</span></span></span></strong></td>
<td style="width: 352px;" colspan="1" rowspan="1"><strong><span style="color: black;"><span style="font-family: calibri,sans-serif;"><span style="font-size: 10.0pt;">Intel Brand Names</span></span></span></strong></td>
</tr>
<tr>
<td style="width: 126px;" colspan="1" rowspan="1"><span style="color: black;"><span style="font-family: calibri,sans-serif;"><span style="font-size: 9.0pt;">Nehalem-EP</span></span></span></td>
<td style="width: 68px;" colspan="1" rowspan="1"><span style="color: black;"><span style="font-family: courier new;"><span style="font-size: 9.0pt;">0x106a5</span></span></span></td>
<td style="width: 352px;" colspan="1" rowspan="1"><span style="color: black;"><span style="font-family: calibri,sans-serif;"><span style="font-size: 8.0pt;">Intel Xeon 35xx Series;<br>Intel Xeon 55xx Series</span></span></span></td>
</tr>
<tr>
<td style="width: 126px;" colspan="1" rowspan="1"><span style="color: black;"><span style="font-family: calibri,sans-serif;"><span style="font-size: 9.0pt;">Lynnfield</span></span></span></td>
<td style="width: 68px;" colspan="1" rowspan="1"><span style="color: black;"><span style="font-family: courier new;"><span style="font-size: 9.0pt;">0x106e5</span></span></span></td>
<td style="width: 352px;" colspan="1" rowspan="1"><span style="color: black;"><span style="font-family: calibri,sans-serif;"><span style="font-size: 8.0pt;">Intel Xeon 34xx Lynnfield Series</span></span></span></td>
</tr>
<tr>
<td style="width: 126px;" colspan="1" rowspan="1"><span style="color: black;"><span style="font-family: calibri,sans-serif;"><span style="font-size: 9.0pt;">Clarkdale</span></span></span></td>
<td style="width: 68px;" colspan="1" rowspan="1"><span style="color: black;"><span style="font-family: courier new;"><span style="font-size: 9.0pt;">0x20652</span></span></span></td>
<td style="width: 352px;" colspan="1" rowspan="1"><span style="color: black;"><span style="font-family: calibri,sans-serif;"><span style="font-size: 8.0pt;">Intel i3/i5 Clarkdale Series;<br>Intel Xeon 34xx Clarkdale Series</span></span></span></td>
</tr>
<tr>
<td style="width: 126px;" colspan="1" rowspan="1"><span style="color: black;"><span style="font-family: calibri,sans-serif;"><span style="font-size: 9.0pt;">Arrandale</span></span></span></td>
<td style="width: 68px;" colspan="1" rowspan="1"><span style="color: black;"><span style="font-family: courier new;"><span style="font-size: 9.0pt;">0x20655</span></span></span></td>
<td style="width: 352px;" colspan="1" rowspan="1"><span style="color: black;"><span style="font-family: calibri,sans-serif;"><span style="font-size: 8.0pt;">Intel Core i7-620LE Processor</span></span></span></td>
</tr>
<tr>
<td style="width: 126px;" colspan="1" rowspan="1"><span style="color: black;"><span style="font-family: calibri,sans-serif;"><span style="font-size: 9.0pt;">Sandy Bridge DT</span></span></span></td>
<td style="width: 68px;" colspan="1" rowspan="1"><span style="color: black;"><span style="font-family: courier new;"><span style="font-size: 9.0pt;">0x206a7</span></span></span></td>
<td style="width: 352px;" colspan="1" rowspan="1"><span style="color: black;"><span style="font-family: calibri,sans-serif;"><span style="font-size: 8.0pt;">Intel Xeon E3-1100 Series;<br>Intel Xeon E3-1200 Series;<br>Intel i7-2655-LE Series;&nbsp; Intel i3-2100 Series</span></span></span></td>
</tr>
<tr>
<td style="width: 126px;" colspan="1" rowspan="1"><span style="color: black;"><span style="font-family: calibri,sans-serif;"><span style="font-size: 9.0pt;">Westmere EP</span></span></span></td>
<td style="width: 68px;" colspan="1" rowspan="1"><span style="color: black;"><span style="font-family: courier new;"><span style="font-size: 9.0pt;">0x206c2</span></span></span></td>
<td style="width: 352px;" colspan="1" rowspan="1"><span style="color: black;"><span style="font-family: calibri,sans-serif;"><span style="font-size: 8.0pt;">Intel Xeon 56xx Series;<br>Intel Xeon 36xx Series</span></span></span></td>
</tr>
<tr>
<td style="width: 126px;" colspan="1" rowspan="1"><span style="color: black;"><span style="font-family: calibri,sans-serif;"><span style="font-size: 9.0pt;">Sandy Bridge EP</span></span></span></td>
<td style="width: 68px;" colspan="1" rowspan="1"><span style="color: black;"><span style="font-family: courier new;"><span style="font-size: 9.0pt;">0x206d7</span></span></span></td>
<td style="width: 352px;" colspan="1" rowspan="1"><span style="color: black;"><span style="font-family: calibri,sans-serif;"><span style="font-size: 8.0pt;">Intel Pentium 1400 Series;<br>Intel Xeon E5-1400 Series;<br>Intel Xeon E5-1600 Series;<br>Intel Xeon E5-2400 Series;<br>Intel Xeon E5-2600 Series;<br>Intel Xeon E5-4600 Series</span></span></span></td>
</tr>
<tr>
<td style="width: 126px;" colspan="1" rowspan="1"><span style="color: black;"><span style="font-family: calibri,sans-serif;"><span style="font-size: 9.0pt;">Nehalem EX</span></span></span></td>
<td style="width: 68px;" colspan="1" rowspan="1"><span style="color: black;"><span style="font-family: courier new;"><span style="font-size: 9.0pt;">0x206e6</span></span></span></td>
<td style="width: 352px;" colspan="1" rowspan="1"><span style="color: black;"><span style="font-family: calibri,sans-serif;"><span style="font-size: 8.0pt;">Intel Xeon 65xx Series;<br>Intel Xeon 75xx Series</span></span></span></td>
</tr>
<tr>
<td style="width: 126px;" colspan="1" rowspan="1"><span style="color: black;"><span style="font-family: calibri,sans-serif;"><span style="font-size: 9.0pt;">Westmere EX</span></span></span></td>
<td style="width: 68px;" colspan="1" rowspan="1"><span style="color: black;"><span style="font-family: courier new;"><span style="font-size: 9.0pt;">0x206f2</span></span></span></td>
<td style="width: 352px;" colspan="1" rowspan="1"><span style="color: black;"><span style="font-family: calibri,sans-serif;"><span style="font-size: 8.0pt;">Intel Xeon E7-8800 Series;<br>Intel Xeon E7-4800 Series;<br>Intel Xeon E7-2800 Series</span></span></span></td>
</tr>
<tr>
<td style="width: 126px;" colspan="1" rowspan="1"><span style="color: black;"><span style="font-family: calibri,sans-serif;"><span style="font-size: 9.0pt;">Ivy Bridge DT</span></span></span></td>
<td style="width: 68px;" colspan="1" rowspan="1"><span style="color: black;"><span style="font-family: courier new;"><span style="font-size: 9.0pt;">0x306a9</span></span></span></td>
<td style="width: 352px;" colspan="1" rowspan="1"><span style="color: black;"><span style="font-family: calibri,sans-serif;"><span style="font-size: 8.0pt;">Intel i3-3200 Series; Intel i7-3500-LE/UE, Intel i7-3600-QE,<br>Intel Xeon E3-1200-v2 Series;<br>Intel Xeon E3-1100-C-v2 Series;<br>Intel Pentium B925C</span></span></span></td>
</tr>
<tr>
<td style="width: 126px;" colspan="1" rowspan="1"><span style="color: black;"><span style="font-family: calibri,sans-serif;"><span style="font-size: 9.0pt;">Haswell DT</span></span></span></td>
<td style="width: 68px;" colspan="1" rowspan="1"><span style="color: black;"><span style="font-family: courier new;"><span style="font-size: 9.0pt;">0x306c3</span></span></span></td>
<td style="width: 352px;" colspan="1" rowspan="1"><span style="color: black;"><span style="font-family: calibri,sans-serif;"><span style="font-size: 8.0pt;">Intel Xeon E3-1200-v3 Series</span></span></span></td>
</tr>
<tr>
<td style="width: 126px;" colspan="1" rowspan="1"><span style="color: black;"><span style="font-family: calibri,sans-serif;"><span style="font-size: 9.0pt;">Ivy Bridge EP</span></span></span></td>
<td style="width: 68px;" colspan="1" rowspan="1"><span style="color: black;"><span style="font-family: courier new;"><span style="font-size: 9.0pt;">0x306e4</span></span></span></td>
<td style="width: 352px;" colspan="1" rowspan="1"><span style="color: black;"><span style="font-family: calibri,sans-serif;"><span style="font-size: 8.0pt;">Intel Xeon E5-4600-v2 Series;<br>Intel Xeon E5-2400-v2 Series;<br>Intel Xeon E5-2600-v2 Series;<br>Intel Xeon E5-1400-v2 Series;<br>Intel Xeon E5-2600-v2 Series</span></span></span></td>
</tr>
<tr>
<td style="width: 126px;" colspan="1" rowspan="1"><span style="color: black;"><span style="font-family: calibri,sans-serif;"><span style="font-size: 9.0pt;">Ivy Bridge EX</span></span></span></td>
<td style="width: 68px;" colspan="1" rowspan="1"><span style="color: black;"><span style="font-family: courier new;"><span style="font-size: 9.0pt;">0x306e7</span></span></span></td>
<td style="width: 352px;" colspan="1" rowspan="1"><span style="color: black;"><span style="font-family: calibri,sans-serif;"><span style="font-size: 8.0pt;">Intel Xeon E7-8800/4800/2800-v2 Series</span></span></span></td>
</tr>
<tr>
<td style="width: 126px;" colspan="1" rowspan="1"><span style="color: black;"><span style="font-family: calibri,sans-serif;"><span style="font-size: 9.0pt;">Haswell EP</span></span></span></td>
<td style="width: 68px;" colspan="1" rowspan="1"><span style="color: black;"><span style="font-family: courier new;"><span style="font-size: 9.0pt;">0x306f2</span></span></span></td>
<td style="width: 352px;" colspan="1" rowspan="1"><span style="color: black;"><span style="font-family: calibri,sans-serif;"><span style="font-size: 8.0pt;">Intel Xeon E5-2400-v3 Series;<br>Intel Xeon E5-1400-v3 Series;<br>Intel Xeon E5-1600-v3 Series;<br>Intel Xeon E5-2600-v3 Series;<br>Intel Xeon E5-4600-v3 Series</span></span></span></td>
</tr>
<tr>
<td style="width: 126px;" colspan="1" rowspan="1"><span style="color: black;"><span style="font-family: calibri,sans-serif;"><span style="font-size: 9.0pt;">Haswell EX</span></span></span></td>
<td style="width: 68px;" colspan="1" rowspan="1"><span style="color: black;"><span style="font-family: courier new;"><span style="font-size: 9.0pt;">0x306f4</span></span></span></td>
<td style="width: 352px;" colspan="1" rowspan="1"><span style="color: black;"><span style="font-family: calibri,sans-serif;"><span style="font-size: 8.0pt;">Intel Xeon E7-8800/4800-v3 Series</span></span></span></td>
</tr>
<tr>
<td style="width: 126px;" colspan="1" rowspan="1"><span style="color: black;"><span style="font-family: calibri,sans-serif;"><span style="font-size: 9.0pt;">Broadwell H</span></span></span></td>
<td style="width: 68px;" colspan="1" rowspan="1"><span style="color: black;"><span style="font-family: courier new;"><span style="font-size: 9.0pt;">0x40671</span></span></span></td>
<td style="width: 352px;" colspan="1" rowspan="1"><span style="color: black;"><span style="font-family: calibri,sans-serif;"><span style="font-size: 8.0pt;">Intel Core i7-5700EQ;<br>Intel Xeon E3-1200-v4 Series</span></span></span></td>
</tr>
<tr>
<td style="width: 126px;" colspan="1" rowspan="1"><span style="color: black;"><span style="font-family: calibri,sans-serif;"><span style="font-size: 9.0pt;">Avoton</span></span></span></td>
<td style="width: 68px;" colspan="1" rowspan="1"><span style="color: black;"><span style="font-family: courier new;"><span style="font-size: 9.0pt;">0x406d8</span></span></span></td>
<td style="width: 352px;" colspan="1" rowspan="1"><span style="color: black;"><span style="font-family: calibri,sans-serif;"><span style="font-size: 8.0pt;">Intel Atom C2300 Series;<br>Intel Atom C2500 Series;<br>Intel Atom C2700 Series</span></span></span></td>
</tr>
<tr>
<td style="width: 126px;" colspan="1" rowspan="1"><span style="color: black;"><span style="font-family: calibri,sans-serif;"><span style="font-size: 9.0pt;">Broadwell EP/EX</span></span></span></td>
<td style="width: 68px;" colspan="1" rowspan="1"><span style="color: black;"><span style="font-family: courier new;"><span style="font-size: 9.0pt;">0x406f1</span></span></span></td>
<td style="width: 352px;" colspan="1" rowspan="1"><span style="color: black;"><span style="font-family: calibri,sans-serif;"><span style="font-size: 8.0pt;">Intel Xeon E7-8800/4800-v4 Series;<br>Intel Xeon E5-4600-v4 Series;<br>Intel Xeon E5-2600-v4 Series;<br>Intel Xeon E5-1600-v4 Series</span></span></span></td>
</tr>
<tr>
<td style="width: 126px;" colspan="1" rowspan="1"><span style="color: black;"><span style="font-family: calibri,sans-serif;"><span style="font-size: 9.0pt;">Skylake SP</span></span></span></td>
<td style="width: 68px;" colspan="1" rowspan="1"><span style="color: black;"><span style="font-family: courier new;"><span style="font-size: 9.0pt;">0x50654</span></span></span></td>
<td style="width: 352px;" colspan="1" rowspan="1"><span style="color: black;"><span style="font-family: calibri,sans-serif;"><span style="font-size: 8.0pt;">Intel Xeon Platinum 8100 (Skylake-SP) Series;<br>Intel Xeon Gold 6100/5100 (Skylake-SP) Series<br>Intel Xeon Silver 4100, Bronze 3100 (Skylake-SP) Series</span></span></span></td>
</tr>
<tr>
<td style="width: 126px;" colspan="1" rowspan="1"><span style="color: black;"><span style="font-family: calibri,sans-serif;"><span style="font-size: 9.0pt;">Broadwell DE</span></span></span></td>
<td style="width: 68px;" colspan="1" rowspan="1"><span style="color: black;"><span style="font-family: courier new;"><span style="font-size: 9.0pt;">0x50662</span></span></span></td>
<td style="width: 352px;" colspan="1" rowspan="1"><span style="color: black;"><span style="font-family: calibri,sans-serif;"><span style="font-size: 8.0pt;">Intel Xeon D-1500 Series</span></span></span></td>
</tr>
<tr>
<td style="width: 126px;" colspan="1" rowspan="1"><span style="color: black;"><span style="font-family: calibri,sans-serif;"><span style="font-size: 9.0pt;">Broadwell DE</span></span></span></td>
<td style="width: 68px;" colspan="1" rowspan="1"><span style="color: black;"><span style="font-family: courier new;"><span style="font-size: 9.0pt;">0x50663</span></span></span></td>
<td style="width: 352px;" colspan="1" rowspan="1"><span style="color: black;"><span style="font-family: calibri,sans-serif;"><span style="font-size: 8.0pt;">Intel Xeon D-1500 Series</span></span></span></td>
</tr>
<tr>
<td style="width: 126px;" colspan="1" rowspan="1"><span style="color: black;"><span style="font-family: calibri,sans-serif;"><span style="font-size: 9.0pt;">Broadwell DE</span></span></span></td>
<td style="width: 68px;" colspan="1" rowspan="1"><span style="color: black;"><span style="font-family: courier new;"><span style="font-size: 9.0pt;">0x50664</span></span></span></td>
<td style="width: 352px;" colspan="1" rowspan="1"><span style="color: black;"><span style="font-family: calibri,sans-serif;"><span style="font-size: 8.0pt;">Intel Xeon D-1500 Series</span></span></span></td>
</tr>
<tr>
<td style="width: 126px;" colspan="1" rowspan="1"><span style="color: black;"><span style="font-family: calibri,sans-serif;"><span style="font-size: 9.0pt;">Broadwell NS</span></span></span></td>
<td style="width: 68px;" colspan="1" rowspan="1"><span style="color: black;"><span style="font-family: courier new;"><span style="font-size: 9.0pt;">0x50665</span></span></span></td>
<td style="width: 352px;" colspan="1" rowspan="1"><span style="color: black;"><span style="font-family: calibri,sans-serif;"><span style="font-size: 8.0pt;">Intel Xeon D-1500 Series</span></span></span></td>
</tr>
<tr>
<td style="width: 126px;" colspan="1" rowspan="1"><span style="color: black;"><span style="font-family: calibri,sans-serif;"><span style="font-size: 9.0pt;">Skylake H/S</span></span></span></td>
<td style="width: 68px;" colspan="1" rowspan="1"><span style="color: black;"><span style="font-family: courier new;"><span style="font-size: 9.0pt;">0x506e3</span></span></span></td>
<td style="width: 352px;" colspan="1" rowspan="1"><span style="color: black;"><span style="font-family: calibri,sans-serif;"><span style="font-size: 8.0pt;">Intel Xeon E3-1500-v5 Series;<br>Intel Xeon E3-1200-v5 Series</span></span></span></td>
</tr>
<tr>
<td style="width: 126px;" colspan="1" rowspan="1"><span style="color: black;"><span style="font-family: calibri,sans-serif;"><span style="font-size: 9.0pt;">Kaby Lake H/S/X</span></span></span></td>
<td style="width: 68px;" colspan="1" rowspan="1"><span style="color: black;"><span style="font-family: courier new;"><span style="font-size: 9.0pt;">0x906e9</span></span></span></td>
<td style="width: 352px;" colspan="1" rowspan="1"><span style="color: black;"><span style="font-family: calibri,sans-serif;"><span style="font-size: 8.0pt;">Intel Xeon E3-1200-v6</span></span></span></td>
</tr>
</tbody>
</table>
<p><br><br></p>
</div></div>
                            </div>
                        </div>
                    

                    
                        <div class="article-detail-card">
                            <div class="article-detail-card-header">
                                <h4 class="wolken-h4">Additional Information</h4>
                            </div>
                            <div class="article-detail-card-content wolken-h5">
                                <div><div><ul>
<li><a href="https://knowledge.broadcom.com/external/article?legacyId=81931" target="_blank" rel="noopener">VMware Skyline Health Diagnostics for vSphere - FAQ (345059)</a></li>
<li><a href="https://knowledge.broadcom.com/external/article?legacyId=57374" target="_blank" rel="noopener">Know more about L1TF (L1 Terminal Fault) here (310322)</a></li>
<li><a href="https://knowledge.broadcom.com/external/article?legacyId=1003742" target="_blank" rel="noopener">Virtual machines appear as invalid or orphaned in vCenter Server (312831)</a></li>
</ul>
<p><br><br></p></div></div>
                            </div>
                        </div>
                    
                    
                    

                    <div class="feedback-section">
                        <h4 class="wolken-h3">Feedback</h4>
                        <div class="wolken-h4" id="feedback_actionMsg"></div>
                        <div class="wolken-h5">
                             <div id="feedback_actions" class="flex-row row-gap-16">
                                <div class="flex-row row-align-center-center row-gap-8 like_dislike_btn" onclick="onArticleLike()">
                                    <span class="material-icons">thumb_up</span>
                                    <span>Yes</span>
                                 </div>
                                 <div class="flex-row row-align-center-center row-gap-8 like_dislike_btn" onclick="onArticleDislike()">
                                    <span class="material-icons">thumb_down</span>
                                    <span>No</span>
                                 </div>
                             </div>
                        </div>
                    </div>

                </div>
                <div class="flex-row wolken-footer">
                    <span class="mat-caption">Powered by</span>
                      <a  target="_blank" href="https://www.wolkensoftware.com/">
                <img src="https://cdn.wolkenservicedesk.com/wolken-footer-image.png" alt="Wolken Software">
                    </a>
                </div>
                <iframe class="custom-footer" frameborder="0" scrolling="no" title="https://cdn.wolkenservicedesk.com/Broadcom_%20Footer.html" src="https://cdn.wolkenservicedesk.com/Broadcom_%20Footer.html" height="118px"></iframe>
            </div>

            <div class="loader-container flex-column">
                <div class="ghost-loader ghost-custom-header"></div>
                <div class="wolken-content-container flex-column column-gap-16">
                    <div class="flex-row row-gap-16 row-align-space-between-center">
                        <div class="ghost-loader ghost-article-title"></div>
                        <div class="ghost-loader ghost-article-date"></div>
                    </div>
                    <div class="article-detail-card">
                        <div class="article-detail-card-header">
                            <div class="ghost-loader ghost-article-detail-title"></div>
                        </div>
                        <div class="article-detail-card-content">
                            <div class="ghost-product-detail-content flex-row row-gap-16">
                                <div class="ghost-loader"></div>
                                <div class="ghost-loader"></div>
                                <div class="ghost-loader"></div>
                                <div class="ghost-loader"></div>
                                <div class="ghost-loader"></div>
                            </div>
                        </div>
                    </div>
                    <div class="article-detail-card">
                        <div class="article-detail-card-header">
                            <div class="ghost-loader ghost-article-detail-title"></div>
                        </div>
                        <div class="article-detail-card-content">
                            <div class="ghost-article-detail-content column-gap-16">
                                <div class="ghost-loader"></div>
                                <div class="ghost-loader"></div>
                                <div class="ghost-loader"></div>
                                <div class="ghost-loader"></div>
                                <div class="ghost-loader"></div>
                            </div>
                        </div>
                    </div>
                    <div class="article-detail-card">
                        <div class="article-detail-card-header">
                            <div class="ghost-loader ghost-article-detail-title"></div>
                        </div>
                        <div class="article-detail-card-content">
                            <div class="ghost-article-detail-content column-gap-16">
                                <div class="ghost-loader"></div>
                                <div class="ghost-loader"></div>
                            </div>
                        </div>
                    </div>
                    <div class="article-detail-card">
                        <div class="article-detail-card-header">
                            <div class="ghost-loader ghost-article-detail-title"></div>
                        </div>
                        <div class="article-detail-card-content">
                            <div class="ghost-article-detail-content column-gap-16">
                                <div class="ghost-loader"></div>
                                <div class="ghost-loader"></div>
                                <div class="ghost-loader"></div>
                                <div class="ghost-loader"></div>
                            </div>
                        </div>
                    </div>
                    <div class="article-detail-card">
                        <div class="article-detail-card-header">
                            <div class="ghost-loader ghost-article-detail-title"></div>
                        </div>
                        <div class="article-detail-card-content">
                            <div class="ghost-article-detail-content column-gap-16">
                                <div class="ghost-loader"></div>
                                <div class="ghost-loader"></div>
                                <div class="ghost-loader"></div>
                                <div class="ghost-loader"></div>
                                <div class="ghost-loader"></div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="ghost-loader ghost-custom-footer"></div>
            </div>
        </div>
    </body>
    <script>

        var apiDomain =  'https://api-broadcomcms-software.wolkenservicedesk.com/';
        var redirectOnSearchUrl =  'https://support.broadcom.com/web/ecx/search';
        var uiDomain =  '';
        var articleId = '317621';
       var articleTitle = 'VMware response to ‘L1 Terminal Fault - VMM’ (L1TF - VMM) Speculative-Execution vulnerability in Intel processors for vSphere: CVE-2018-3646';
        var articlePageUrl = uiDomain+'/wolken-support/article?articleId=';
        var attachmentVos = '';
        var kb_public_page_domain = 'broadcomcms-software.wolkenservicedesk.com'
        var kbDownloadDomain = 'broadcomcms-software.wolkenservicedesk.com';
        var regularAttachment = false



        var feedbackConfigData = {};

        document.getElementById('global-header').addEventListener('load', frameVisibilty);
        setTimeout(function ()  {
            document.getElementById('global-header').removeEventListener('load', frameVisibilty);
            frameVisibilty();
        }, 5000);

        function frameVisibilty() {
              setTimeout(function(){
                  document.getElementsByClassName('article-container')[0].style.display = 'flex';
                  document.getElementsByClassName('loader-container')[0].style.display = 'none';
              }, 1000);

            var date = document.getElementById('date_time');
            var d = '08-21-2024 11:54';
            date.innerHTML = d;
            date.innerHTML = d.split(' ')[0];

            var arr = document.getElementsByClassName("product-chip");
             if(arr.length > 15){
             document.getElementsByClassName('product-container')[0].style.overflow = 'hidden';
             document.getElementsByClassName('product-container')[0].style.height = '53px';
             document.getElementsByClassName('show_more')[0].style.display = 'block';
             document.getElementsByClassName('show_less')[0].style.display = 'none';
             }
             else{
             document.getElementsByClassName('product-container')[0].style.overflow = 'auto';
             document.getElementsByClassName('product-container')[0].style.height = 'auto';
             document.getElementsByClassName('show_more')[0].style.display = 'none';
             document.getElementsByClassName('show_less')[0].style.display = 'none';
             }
        }

          function showMoreItems(){
            document.getElementsByClassName('product-container')[0].style.overflow = 'auto';
            document.getElementsByClassName('product-container')[0].style.height = 'auto';
            document.getElementsByClassName('show_more')[0].style.display = 'none';
            document.getElementsByClassName('show_less')[0].style.display = 'block';
        }

        function showLessItems(){
            document.getElementsByClassName('product-container')[0].style.overflow = 'hidden';
            document.getElementsByClassName('product-container')[0].style.height = '53px';
            document.getElementsByClassName('show_more')[0].style.display = 'block';
            document.getElementsByClassName('show_less')[0].style.display = 'none';
        }

        function downloadAttachment(uniquefileid) {
            // var uniqueFileId = element.getAttribute('data-uniquefileid');
            //var uniqueFileId = element.dataset.uniquefileid;
            var uniqueFileId = uniquefileid;

            var form = document.createElement('form');
            form.setAttribute('method', 'post');
            form.setAttribute('action', apiDomain + 'es/attachments/download_attachment?domain='+kbDownloadDomain);
            form.setAttribute('target', '_self');
            var hiddenField = document.createElement('input');
            hiddenField.setAttribute('type', 'hidden');
            hiddenField.setAttribute('name', 'data');
            hiddenField.setAttribute('value', JSON.stringify({
                uniqueFileId: uniqueFileId
            }));
            form.appendChild(hiddenField);
            document.body.appendChild(form);
            window.open('', '_self');
            form.submit();
            form.parentNode.removeChild(form);
        }

        document.addEventListener('DOMContentLoaded', function(){
            articleViewed();
            getFeedbackConfig();
            saveArticleViewCountHistory();
        });

        function articleViewed() {
            try {

                        gza("conversion", {
                        index:"server_ws_knowledge_article" ,
                        type: 'ws_knowledge_articles_doc',
                        id: articleId,
                        rank: 1,
                        convUrl: location.href,
                        convSub: articleTitle
                    });
                } catch(error) {
                    console.log(error);
                }

            saveArticleCount('views');
        }

    function getFeedbackConfig() {
        if (kb_public_page_domain) {
        var articleFeedbackConfigRequest = new XMLHttpRequest();
        articleFeedbackConfigRequest.open('GET', apiDomain + 'es/nau/feedback/config');
            articleFeedbackConfigRequest.setRequestHeader("domain", kb_public_page_domain);
        articleFeedbackConfigRequest.send();
        articleFeedbackConfigRequest.onload = function () {
            if (articleFeedbackConfigRequest.status == 200) {
                var response = JSON.parse(articleFeedbackConfigRequest.response);
                if (response && response.data && response.data.feedbackConfigData) {
                    feedbackConfigData = response.data.feedbackConfigData;
                    document.getElementById('feedback_actionMsg').innerHTML = feedbackConfigData.actionMsg;
                } else {
                    document.getElementsByClassName('feedback-section')[0].remove();
                }
            }
        };
    } else {
        console.log('Error! KB public domain is not configrued.');
    }
    }

        function saveArticleCount(countType) {
            var data = {
                articleId: articleId
            };

            data[countType] = 1;

            var formData = new FormData();
            formData.append('data', JSON.stringify(data));

        if (kb_public_page_domain) {
        var articleLikeRequest = new XMLHttpRequest();
        articleLikeRequest.open('POST', apiDomain + 'es/nau/feedback/feedback_count');
            articleLikeRequest.setRequestHeader("domain", kb_public_page_domain);
        articleLikeRequest.send(formData);
        articleLikeRequest.onload = function () {
            if (articleLikeRequest.status == 200) {
            }
        };
    } else {
        console.log('Error! KB public domain is not configrued.');
    }
    }

        function saveArticleViewCountHistory() {
            let articleViewData = new FormData();
            articleViewData.append('data', JSON.stringify({
                "articleId":articleId,
                "countType":"VIEWS"
            }));

        if (kb_public_page_domain) {
        var articleViewRequest = new XMLHttpRequest();
        articleViewRequest.open('POST', apiDomain + 'es/nau/count/save_article_count');
            articleViewRequest.setRequestHeader("domain", kb_public_page_domain);
        //articleViewRequest.withCredentials = true;
        articleViewRequest.send(articleViewData);
        articleViewRequest.onload = function () {
            if (articleViewRequest.status == 200) {
                console.log(articleViewRequest.response);
            }
        };
    } else {
        console.log('Error! KB public domain is not configrued.');
    }
    }

        function onArticleLike() {
            try {
                gza("pageRating", {
                    referer: document.referrer,
                    url: window.location.href,
                    t: document.getElementsByTagName('title')[0] ? document.getElementsByTagName('title')[0].innerText : window.location.href,
                    uid: '1fd47e1f-f7d9-11ea-beba-0242ac12000b',
                    feedback: 1
                });
            } catch(error) {
                console.log(error);
            }


            document.getElementById('feedback_actionMsg').innerHTML = feedbackConfigData.yesMsg;
            document.getElementById('feedback_actions').remove();

            saveArticleCount('likes');
        }

        function onArticleDislike() {
            saveArticleDisLikeCount();
             document.getElementById('feedback_actionMsg').innerHTML = feedbackConfigData.yesMsg;
             document.getElementById('feedback_actions').remove();
        }

        function redirectToFeedbackPage() {
            window.open(articlePageUrl + articleId +'&action=feedback', '_self');
        }

        function saveArticleDisLikeCount() {
            try {
                gza("pageRating", {
                    referer: document.referrer,
                    url: window.location.href,
                    t: document.getElementsByTagName('title')[0] ? document.getElementsByTagName('title')[0].innerText : window.location.href,
                    uid: '1fd47e1f-f7d9-11ea-beba-0242ac12000b',
                    feedback: 0
                });
            } catch(error) {
                console.log(error);
            }

            saveArticleCount('dislikes');
        }

        function clearSearch(){
            document.getElementById('searchBox').value = '';
        }

        function redirectOnSearch(e){
        if(e && e.keyCode === 13 || e === undefined){
        const searchText = document.getElementById('searchBox').value;
        var redirectOnSearchUrl = 'https://support.broadcom.com/web/ecx/search?searchString=' + searchText;
        window.open(redirectOnSearchUrl, '_blank');
      }
        }
    </script>
    <!-- Google Tag Manager (noscript) -->
    <noscript><iframe title="No Script" src="https://www.googletagmanager.com/ns.html?id=GTM-KF7XWD" height="0" width="0"
        style="display:none;visibility:hidden"></iframe></noscript>
    <!-- End Google Tag Manager (noscript) -->
</html>
